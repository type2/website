Date: Sun, 11 Apr 2010 11:36:52 -0700
From: Mike Soultanian <msoultan(-at-)csulb.edu>
To: type2(-at-)type2.com
Subject: Re: [T2] EGT and stuff!

On 4/11/2010 10:12 AM, John Kolak wrote:
> Normally when we say lean is hotter, the term is relative, meaning
> "leaner", but still on the rich side of stoichiometry. The GAMI
> article talks about crossing over to the lean side of Lambda where

A new neat feature that I'm going to implement in the next few days is 
the "include AFRtarget" feature that includes the desired air/fuel ratio 
(AFR) in the injector pulsewidth (how much fuel to inject) calculation 
instead of just looking up how much fuel to inject from the VE table.

Currently, the MegaSquirts's VE table is essentially a fueling table. 
It has two axes, Y is the load, X is the RPM.  You go various points 
around the table and adjust how much fuel you want to be injected for 
various loads/RPMs.

To tune that table, you either manually go to each of the points (it's a 
16x16 table) and adjust the value up or down (more/less fuel) to yield 
the air/fuel ratio that you're looking for.  That's kinda a pain.

The other way is you use autotune that looks at a corresponding AFR 
table and automatically adjusts the VE table up or down so that the 
measured AFR matches the commanded AFR in the AFR table.  This method is 
pretty descent.


However, even cooler is the new "include AFRtarget" feature that changes 
things a bit - instead of the VE table being a fueling table, that table 
now depicts the volumetric efficiency of the engine at varying 
loads/RPMS and then calculates the desired fueling by looking up the 
desired AFR table and then multiplying the needed values.

So, instead of using autotune to adjust your fueling table up or down 
(which requires you to drive while the autotune adjusts up or down), you 
can just change a value in your AFR table and the next time you drive, 
the amount of fuel to inject is instantly calculated and *should* yield 
the desired AFR (based on calculations).  This means that you can 
conceivably can go to the AFR table and let's say I want an AFR of 16:1 
at cruise, all I do is put that number in, and the next time I go drive 
and hit the cruise range, that AFR value will be looked up and included 
in the fueling calculation and the measured AFR should be the same as 
the desired AFR (assuming that the VE table is adjusted correctly).

Anyways, just some neat stuff going on in MegaSquirt land :)

Mike
